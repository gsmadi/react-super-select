<!DOCTYPE html>

<html>
<head>
  <title>react-super-select.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>react-super-select.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>© Scotland Stephenson 2015-2016</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <ul>
<li><a href="https://github.com/alsoscotland/react-super-select">github</a></li>
<li><a href="http://alsoscotland.github.io/react-super-select/">documentation</a></li>
<li>freely distributed under the MIT license.</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Dependencies</p>
<ul>
<li><a href="https://lodash.com/">Lodash</a></li>
<li><a href="https://www.npmjs.com/package/classnames">classnames</a></li>
<li><a href="https://facebook.github.io/react/index.html">React</a></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>PROPS and DEFAULT PROPS are declared at Bottom of File</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReactSuperSelect</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {

    <span class="hljs-keyword">super</span>(props);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="constants">CONSTANTS</h2>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>used as the focusedId state variable value, when the search input field of a <strong>searchable</strong> control has focus.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID = <span class="hljs-number">-1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>regular expression used to determine if event src options have selected class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX = <span class="hljs-regexp">/r-ss-selected/</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="keymap-constant">KEYMAP CONSTANT</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>A text-based lookup for keyboard navigation keys and their corresponding ‘which’ keycode values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.keymap = {
      <span class="hljs-attr">down</span>: <span class="hljs-number">40</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">35</span>, <span class="hljs-comment">// goto last option ?</span>
      enter: <span class="hljs-number">13</span>,
      <span class="hljs-attr">esc</span>: <span class="hljs-number">27</span>,
      <span class="hljs-attr">home</span>: <span class="hljs-number">36</span>, <span class="hljs-comment">// go to first option ?</span>
      space: <span class="hljs-number">32</span>,
      <span class="hljs-attr">tab</span>: <span class="hljs-number">9</span>,
      <span class="hljs-attr">up</span>: <span class="hljs-number">38</span>
    };

    <span class="hljs-keyword">this</span>.ariaRelevantKeydownCodes = _.values(<span class="hljs-keyword">this</span>.keymap);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>NON-STATE VARS (no need to re-render based on these being set)</p>

            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><strong>lastUserSelectedOptionData</strong> - A store of the last user-selected option, used for accesibility-related option focusing, as well as shift-click selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.lastUserSelectedOption = <span class="hljs-literal">undefined</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>store object for internal DOM refs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._rssDOM = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="state-variables">STATE VARIABLES</h2>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.state = {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><strong>ajaxError</strong> (Boolean) - Set to true when an ajax request fails</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      ajaxError: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><strong>controlId</strong> (String) - A unique identifier for the rss control. This value is used to generate aria accessibility labels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      controlId: _.uniqueId(<span class="hljs-string">'rss_'</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>data</strong> (Array of Objects) the active dataSource collection used to map to option elements, with any search filtering results reflected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data: <span class="hljs-keyword">this</span>._configureDataSource(<span class="hljs-keyword">this</span>.props.dataSource),</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p><strong>rawDataSource</strong> (Object|Array) The raw dataSource value the user supplies through the <em>dataSource</em> prop (or returned from <em>ajaxDataFetch</em> / <em>pageDataFetch</em>). This value is passed to the <em>pageDataFetch</em> callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      rawDataSource: <span class="hljs-keyword">this</span>.props.dataSource,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><strong>isOpen</strong> (Boolean) - Whether or not the dropdown is open</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      isOpen: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><strong>focusedId</strong> (Number) - Used to track keyboard focus for accessibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      focusedId: <span class="hljs-literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><strong>labelKey</strong> (String) - The option object key that will be used to identify the value displayed as an option’s label</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      labelKey: <span class="hljs-keyword">this</span>.props.optionLabelKey,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><strong>lastOptionId</strong> (Number) - Used in keyboard navigation to focus the last available option in the dropdown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      lastOptionId: (_.isArray(<span class="hljs-keyword">this</span>.props.dataSource) &amp;&amp; (<span class="hljs-keyword">this</span>.props.dataSource.length &gt; <span class="hljs-number">0</span>)) ? <span class="hljs-keyword">this</span>.props.dataSource.length - <span class="hljs-number">1</span> : <span class="hljs-literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><strong>searchString</strong> (String) - When the <strong>searchable</strong> option is true, this is the user-entered value in the search field. It is used for data filtering based on the label key’s value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      searchString: <span class="hljs-literal">undefined</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><strong>value</strong> (Array) - An array that holds the current user-selected option(s)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      value: <span class="hljs-keyword">this</span>._buildInitialValue(),</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><strong>valueKey</strong> (String) - The option object key that will be used to identify the value used as an option’s value property (values must be unique across data source)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      valueKey: <span class="hljs-keyword">this</span>.props.optionValueKey
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>force control instance context in all internal class functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.bindAll(<span class="hljs-keyword">this</span>, [
      <span class="hljs-string">'toggleDropdown'</span>,
      <span class="hljs-string">'_ariaGetActiveDescendentId'</span>,
      <span class="hljs-string">'_ariaGetListId'</span>,
      <span class="hljs-string">'_arrestScroll'</span>,
      <span class="hljs-string">'_broadcastChange'</span>,
      <span class="hljs-string">'_buildInitialValue'</span>,
      <span class="hljs-string">'_clearSearchString'</span>,
      <span class="hljs-string">'_clearSelection'</span>,
      <span class="hljs-string">'_closeOnKeypress'</span>,
      <span class="hljs-string">'_configureDataSource'</span>,
      <span class="hljs-string">'_defaultSearchFilter'</span>,
      <span class="hljs-string">'_fetchDataViaAjax'</span>,
      <span class="hljs-string">'_fetchNextPage'</span>,
      <span class="hljs-string">'_filterDataBySearchString'</span>,
      <span class="hljs-string">'_findArrayOfOptionDataObjectsByValue'</span>,
      <span class="hljs-string">'_focusCurrentFocusedId'</span>,
      <span class="hljs-string">'_focusDOMOption'</span>,
      <span class="hljs-string">'_focusRemovalButtons'</span>,
      <span class="hljs-string">'_focusTrigger'</span>,
      <span class="hljs-string">'_generateValueDisplay'</span>,
      <span class="hljs-string">'_getAjaxErrorMarkup'</span>,
      <span class="hljs-string">'_getDataSource'</span>,
      <span class="hljs-string">'_getDropdownContent'</span>,
      <span class="hljs-string">'_getFocusedOptionKey'</span>,
      <span class="hljs-string">'_getGroupHeadingMarkup'</span>,
      <span class="hljs-string">'_getNoResultsMarkup'</span>,
      <span class="hljs-string">'_getNormalDisplayMarkup'</span>,
      <span class="hljs-string">'_getLoadingMarkup'</span>,
      <span class="hljs-string">'_getOptionIndexFromTarget'</span>,
      <span class="hljs-string">'_getOptionsMarkup'</span>,
      <span class="hljs-string">'_getOptionValueFromDataAttr'</span>,
      <span class="hljs-string">'_getPagingLi'</span>,
      <span class="hljs-string">'_getSearchContent'</span>,
      <span class="hljs-string">'_getTagsDisplayMarkup'</span>,
      <span class="hljs-string">'_getTagMarkup'</span>,
      <span class="hljs-string">'_getTagRemoveIndex'</span>,
      <span class="hljs-string">'_getTemplatedOptions'</span>,
      <span class="hljs-string">'_handleDocumentClick'</span>,
      <span class="hljs-string">'_handleKeyDown'</span>,
      <span class="hljs-string">'_handleSearch'</span>,
      <span class="hljs-string">'_isCurrentlySelected'</span>,
      <span class="hljs-string">'_isMultiSelect'</span>,
      <span class="hljs-string">'_isUserSearchTypingEvent'</span>,
      <span class="hljs-string">'_mapDataToOptionsMarkup'</span>,
      <span class="hljs-string">'_moveFocusDown'</span>,
      <span class="hljs-string">'_moveFocusUp'</span>,
      <span class="hljs-string">'_needsAjaxFetch'</span>,
      <span class="hljs-string">'_onDownKey'</span>,
      <span class="hljs-string">'_onEndKey'</span>,
      <span class="hljs-string">'_onEnterKey'</span>,
      <span class="hljs-string">'_onEscKey'</span>,
      <span class="hljs-string">'_onHomeKey'</span>,
      <span class="hljs-string">'_onMouseMove'</span>,
      <span class="hljs-string">'_onUpKey'</span>,
      <span class="hljs-string">'_pageFetchingComplete'</span>,
      <span class="hljs-string">'_removeAllOptionsInOptionIdRange'</span>,
      <span class="hljs-string">'_removeSelectedOptionByValue'</span>,
      <span class="hljs-string">'_removeTagKeyPress'</span>,
      <span class="hljs-string">'_removeTagClick'</span>,
      <span class="hljs-string">'_selectAllOptionsInOptionIdRange'</span>,
      <span class="hljs-string">'_selectAllOptionsToLastUserSelectedOption'</span>,
      <span class="hljs-string">'_selectFocusedOption'</span>,
      <span class="hljs-string">'_selectItemByValues'</span>,
      <span class="hljs-string">'_selectItemOnOptionClick'</span>,
      <span class="hljs-string">'_setFocusIdToSearch'</span>,
      <span class="hljs-string">'_setFocusOnOpen'</span>,
      <span class="hljs-string">'_setFocusToTagRemovalIfPresent'</span>,
      <span class="hljs-string">'_updateFocusedId'</span>
    ]);

  }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>wire document click close control handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  componentDidMount() {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Testing ReactSuperSelect component changes.'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.disabled) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>._handleDocumentClick);
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchstart'</span>, <span class="hljs-keyword">this</span>._handleDocumentClick);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.openOnMount) {
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">isOpen</span>: <span class="hljs-literal">true</span>
      }, () =&gt; {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.focusOnMount &amp;&amp; !_.isFunction(<span class="hljs-keyword">this</span>.props.ajaxDataFetch)) {
          <span class="hljs-keyword">this</span>._moveFocusDown();
        }
      });
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>remove binding for document click close control handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  componentWillUnmount() {
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>._handleDocumentClick);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchstart'</span>, <span class="hljs-keyword">this</span>._handleDocumentClick);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>If parent page updates the data source, reset all control state values which are derived from props.
Reset some state defaults and dataSource related fields if dataSource changed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  componentWillReceiveProps(nextProps) {
    <span class="hljs-keyword">let</span> newState = {};

    <span class="hljs-keyword">if</span> (!_.isEqual(nextProps.initialValue, <span class="hljs-keyword">this</span>.props.initialValue)) {
      newState.value = <span class="hljs-keyword">this</span>._buildInitialValue(nextProps);
    }

    <span class="hljs-keyword">if</span> (!_.isUndefined(nextProps.optionLabelKey) &amp;&amp; (nextProps.optionLabelKey !== <span class="hljs-keyword">this</span>.props.optionLabelKey)) {
      newState.labelKey = nextProps.optionLabelKey;
    }

    <span class="hljs-keyword">if</span> (!_.isUndefined(nextProps.optionValueKey) &amp;&amp; (nextProps.optionValueKey !== <span class="hljs-keyword">this</span>.props.optionValueKey)) {
      newState.valueKey = nextProps.optionValueKey;
    }

    <span class="hljs-keyword">if</span> (!_.isEqual(<span class="hljs-keyword">this</span>.props.dataSource, nextProps.dataSource)) {

      <span class="hljs-keyword">this</span>.lastUserSelectedOption = <span class="hljs-literal">undefined</span>;

      newState = _.extend(newState, {
        <span class="hljs-attr">data</span>: <span class="hljs-keyword">this</span>._configureDataSource(nextProps.dataSource),
        <span class="hljs-attr">rawDataSource</span>: nextProps.dataSource,
        <span class="hljs-attr">focusedId</span>: <span class="hljs-literal">undefined</span>,
        <span class="hljs-attr">lastOptionId</span>: (_.isArray(nextProps.dataSource) &amp;&amp; (nextProps.dataSource.length &gt; <span class="hljs-number">0</span>)) ? nextProps.dataSource.length - <span class="hljs-number">1</span> : <span class="hljs-literal">undefined</span>
      });

    }

    <span class="hljs-keyword">if</span> (!_.isEmpty(newState)) {
      <span class="hljs-keyword">this</span>.setState(newState);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Update focused element after re-render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  componentDidUpdate(prevProps, prevState) {
    <span class="hljs-keyword">this</span>._focusCurrentFocusedId();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen !== prevState.isOpen) {
      <span class="hljs-keyword">var</span> openStateCallback = <span class="hljs-keyword">this</span>.state.isOpen ? <span class="hljs-keyword">this</span>.props.onOpenDropdown : <span class="hljs-keyword">this</span>.props.onCloseDropdown;
      openStateCallback();
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>main render method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render() {
    <span class="hljs-keyword">let</span> caratClass = classNames(<span class="hljs-string">'carat'</span>, {
          <span class="hljs-string">'down'</span>: !<span class="hljs-keyword">this</span>.state.isOpen,
          <span class="hljs-string">'up'</span>: <span class="hljs-keyword">this</span>.state.isOpen
        }),
        clearSelectionButton = <span class="hljs-literal">null</span>,
        clearSelectionLabelString = <span class="hljs-keyword">this</span>.props.clearSelectionLabelString ? <span class="hljs-keyword">this</span>.props.clearSelectionLabelString : <span class="hljs-keyword">this</span>.props.clearSelectionLabelString,
        dropdownContent = <span class="hljs-keyword">this</span>._getDropdownContent(),
        placeholderString,
        triggerClasses,
        triggerDisplayContent,
        wrapClasses;

    wrapClasses = classNames(<span class="hljs-string">"r-ss-wrap"</span>, <span class="hljs-keyword">this</span>.props.customClass, {
      <span class="hljs-string">'r-ss-expanded'</span>: <span class="hljs-keyword">this</span>.state.isOpen
    });

    triggerClasses = classNames(<span class="hljs-string">'r-ss-trigger'</span>, {
      <span class="hljs-string">'r-ss-open'</span>: <span class="hljs-keyword">this</span>.state.isOpen,
      <span class="hljs-string">'r-ss-disabled'</span>: <span class="hljs-keyword">this</span>.props.disabled,
      <span class="hljs-string">'r-ss-placeholder'</span>: <span class="hljs-keyword">this</span>.state.value.length &lt; <span class="hljs-number">1</span>
    });

    placeholderString = <span class="hljs-keyword">this</span>.props.placeholder ? <span class="hljs-keyword">this</span>.props.placeholder : <span class="hljs-keyword">this</span>.props.placeholder;
    triggerDisplayContent = <span class="hljs-keyword">this</span>.state.value.length ? <span class="hljs-keyword">this</span>._generateValueDisplay() : placeholderString;

    <span class="hljs-keyword">if</span> (!_.isEmpty(<span class="hljs-keyword">this</span>.state.value) &amp;&amp; (<span class="hljs-keyword">this</span>.props.clearable !== <span class="hljs-literal">false</span>)) {
      clearSelectionButton = <span class="hljs-function">(<span class="hljs-params">&lt;button aria-label={clearSelectionLabelString} ref={(c</span>) =&gt;</span> {<span class="hljs-keyword">this</span>._rssDOM.selectionClear = c; }} name=<span class="hljs-string">"clearSelection"</span> type=<span class="hljs-string">"button"</span> className=<span class="hljs-string">"r-ss-selection-clear"</span> onClick={<span class="hljs-keyword">this</span>._clearSelection} onKeyDown={<span class="hljs-keyword">this</span>._clearSelection}&gt;
                                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> /&gt;</span>
                             <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>);
    }

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.rssControl = c }} id={this.state.controlId} className={wrapClasses}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.triggerDiv = c }}
           className={triggerClasses}
           onClick={this.toggleDropdown}
           onKeyDown={this._handleKeyDown}
           role="combobox"
           aria-activedescendant={this._ariaGetActiveDescendentId()}
           aria-disabled={this.props.disabled}
           aria-haspopup={true}
           aria-controls={this._ariaGetListId()}
           aria-label={placeholderString}
           aria-multiselectable={this._isMultiSelect()}
           tabIndex="0"&gt;
            {triggerDisplayContent}
            {clearSelectionButton}
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.carat = c }} className={caratClass}&gt; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        {dropdownContent}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>toggles the open-state of the dropdown
sets focused option in callback after opening</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  toggleDropdown() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.disabled) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> newState = {
          <span class="hljs-attr">isOpen</span>: !<span class="hljs-keyword">this</span>.state.isOpen
        };

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
      _.extend(newState, {
        <span class="hljs-attr">focusedId</span>: <span class="hljs-literal">undefined</span>
      });
    }

    <span class="hljs-keyword">this</span>.setState(newState, () =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
        <span class="hljs-keyword">this</span>._setFocusOnOpen();
      }
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>returns the unique DOM id for the currently focused option. Used for accessibility-related labeling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _ariaGetActiveDescendentId() {
    <span class="hljs-keyword">let</span> ariaActiveDescendantId = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">const</span> optionRef = <span class="hljs-keyword">this</span>._getFocusedOptionKey();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM[optionRef]) {
      ariaActiveDescendantId = <span class="hljs-keyword">this</span>._rssDOM[optionRef].id;
    }
    <span class="hljs-keyword">return</span> ariaActiveDescendantId;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>calculate the unique identifier for the options ul for aria compliance labeling usage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _ariaGetListId() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state.controlId + <span class="hljs-string">'_list'</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>helper for stopping event propagation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _arrestEvent(event) {
    event.stopPropagation();
    event.preventDefault();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>stop wheel events in dropdown from scrolling page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _arrestScroll(event) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.forceDefaultBrowserScrolling) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">let</span> arrestScroll = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> adjustedHeight = <span class="hljs-keyword">this</span>._rssDOM.scrollWrap.scrollTop + <span class="hljs-keyword">this</span>._rssDOM.scrollWrap.clientHeight;

    <span class="hljs-keyword">if</span> (event.deltaY &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (adjustedHeight &gt;= <span class="hljs-keyword">this</span>._rssDOM.scrollWrap.scrollHeight) {
        arrestScroll = <span class="hljs-literal">true</span>;
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM.scrollWrap.scrollTop &lt;= <span class="hljs-number">0</span>) {
      arrestScroll = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">if</span> (arrestScroll) {
      <span class="hljs-keyword">this</span>._arrestEvent(event);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>call onChange handler with updated value
should be called as setState callback when changing state.value
will call with undefined when no values are set</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _broadcastChange() {
    <span class="hljs-keyword">let</span> outputValue = <span class="hljs-keyword">this</span>._isMultiSelect() ? <span class="hljs-keyword">this</span>.state.value : _.head(<span class="hljs-keyword">this</span>.state.value);
    outputValue = _.isEmpty(outputValue) ? <span class="hljs-literal">undefined</span> : outputValue;
    <span class="hljs-keyword">this</span>.props.onChange(outputValue);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>calculate the initial value for the control from props, componentWillReceiveProps will call passing nextProps</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _buildInitialValue(props) {
    props = props || <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">let</span> initialValue = [];

    <span class="hljs-keyword">if</span> (!_.isUndefined(props.initialValue)) {
      initialValue = _.isArray(props.initialValue) ? props.initialValue : [props.initialValue];

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._isMultiSelect()) {
        initialValue = [_.head(initialValue)];
      }
    }

    <span class="hljs-keyword">return</span> initialValue;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>clear the searchString value
for <strong>searchable</strong> controls</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _clearSearchString() {
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">searchString</span>: <span class="hljs-literal">undefined</span>
    }, <span class="hljs-keyword">this</span>._setFocusIdToSearch);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>clear the selected options
for <strong>clearable</strong> controls</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _clearSelection(event) {
    <span class="hljs-keyword">if</span> ((event.which === <span class="hljs-keyword">this</span>.keymap.enter) || (event.which === <span class="hljs-keyword">this</span>.keymap.space) || (event.type === <span class="hljs-string">"click"</span>)) {
      event.stopPropagation();
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">value</span>: []
      }, () =&gt; {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
          <span class="hljs-keyword">this</span>._setFocusOnOpen();
        }
        <span class="hljs-keyword">this</span>.lastUserSelectedOption = <span class="hljs-literal">undefined</span>;
        <span class="hljs-keyword">this</span>._focusTrigger();
        <span class="hljs-keyword">this</span>._broadcastChange();
      });
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>close the dropdown
resets focus to the main control trigger
clear focused id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _closeOnKeypress() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">isOpen</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">focusedId</span>: <span class="hljs-literal">undefined</span>
      }, <span class="hljs-keyword">this</span>._focusTrigger);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>overloaded dataSource parser (Object|Array)
case: (object) - look for a collection property which is an array, or runs an existing ‘get’ function, get(‘collection’), and determines if the return value is an array
case: (Array) - return the dataSource array for use as this.state.data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _configureDataSource(dataSource) {
    <span class="hljs-keyword">if</span> (_.isArray(dataSource)) {
     <span class="hljs-keyword">return</span> dataSource;
    }

    <span class="hljs-keyword">if</span> (_.isObject(dataSource)) {
      <span class="hljs-keyword">if</span> (_.isArray(dataSource.collection)) {
        <span class="hljs-keyword">return</span> dataSource.collection;
      }

      <span class="hljs-keyword">if</span> (_.isFunction(dataSource.get)) {
        <span class="hljs-keyword">const</span> collection = dataSource.get(<span class="hljs-string">'collection'</span>);
        <span class="hljs-keyword">if</span> (_.isArray(collection)) {
          <span class="hljs-keyword">return</span> collection;
        }
      }
    }

    <span class="hljs-keyword">return</span> [];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Used if no <strong>customFilterFunction</strong> provided for filtering the data options shown in a <strong>searchable</strong> control.
Runs a lowercase string comparison with the <strong>searchString</strong> and the value corresponding to an option’s <strong>optionLabelKey</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _defaultSearchFilter(option) {
    <span class="hljs-keyword">const</span> search = <span class="hljs-keyword">this</span>.state.searchString.toLowerCase();
    <span class="hljs-keyword">if</span> (!_.isString(option[<span class="hljs-keyword">this</span>.state.labelKey])) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> option[<span class="hljs-keyword">this</span>.state.labelKey].toLowerCase().indexOf(search) &gt; <span class="hljs-number">-1</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>fetch data source via ajax if <strong>ajaxDataFetch</strong> function provided
handles success and failure for ajax call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _fetchDataViaAjax() {
    <span class="hljs-keyword">const</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.props.ajaxDataFetch(<span class="hljs-keyword">this</span>.state.rawDataSource).then(<span class="hljs-function">(<span class="hljs-params">dataSourceFromAjax</span>) =&gt;</span> {
      self.setState({
        <span class="hljs-attr">ajaxError</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">data</span>: self._configureDataSource(dataSourceFromAjax),
        <span class="hljs-attr">rawDataSource</span>: dataSourceFromAjax
      }, () =&gt; {
        <span class="hljs-keyword">if</span> (self.props.openOnMount &amp;&amp; self.props.focusOnMount) {
          self._moveFocusDown();
        }
      });
    }, () =&gt; {
      self.setState({
        <span class="hljs-attr">ajaxError</span>: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>define as empty array on error so that _needsAjaxFetch will evaluate to false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        rawDataSource: []
      });
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Fetch the next page of options data if <strong>pageDataFetch</strong> function provided.
Called onMouseMove if scroll position in dropdown exceeds threshold.
Handles success and failure for ajax call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _fetchNextPage() {
    <span class="hljs-keyword">const</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.props.pageDataFetch(<span class="hljs-keyword">this</span>.state.rawDataSource).then(<span class="hljs-function">(<span class="hljs-params">dataSourceFromPageFetch</span>) =&gt;</span> {
      self.setState({
        <span class="hljs-attr">ajaxError</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">data</span>: self._configureDataSource(dataSourceFromPageFetch),
        <span class="hljs-attr">rawDataSource</span>: dataSourceFromPageFetch,
        <span class="hljs-attr">isFetchingPage</span>: <span class="hljs-literal">false</span>
      });
    }, () =&gt; {
        self.setState({
          <span class="hljs-attr">ajaxError</span>: <span class="hljs-literal">true</span>
        });
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>choose the appropriate search filter function and run the filter against the options data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _filterDataBySearchString(data) {
    <span class="hljs-keyword">const</span> self = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">let</span> filterFunction = <span class="hljs-keyword">this</span>._defaultSearchFilter;
    <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.props.customFilterFunction)) {
      filterFunction = <span class="hljs-function">(<span class="hljs-params">value, index, collection</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> self.props.customFilterFunction.apply(self, [value, index, collection, self.state.searchString.toLowerCase()]);
      };
    }
    <span class="hljs-keyword">return</span> _.filter(data, filterFunction);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>used when selecting values, returns an array of full option-data objects which contain any single value, or any one of an array of values passed in</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _findArrayOfOptionDataObjectsByValue(value) {
    <span class="hljs-keyword">const</span> valuesArray = _.isArray(value) ? _.map(value, <span class="hljs-keyword">this</span>.state.valueKey) : [value];
    <span class="hljs-keyword">return</span> _.reject(<span class="hljs-keyword">this</span>.state.data, (item) =&gt; {
      <span class="hljs-keyword">return</span> !_.includes(valuesArray, item[<span class="hljs-keyword">this</span>.state.valueKey]);
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>determine whether to focus a option value in the DOM, or the search field</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _focusCurrentFocusedId() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.focusedId &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>._focusSearch();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._focusDOMOption();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>focus the DOM option identified by the current state.focusedId</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _focusDOMOption() {
    <span class="hljs-keyword">const</span> optionRef = <span class="hljs-keyword">this</span>._getFocusedOptionKey();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM[optionRef]) {
      <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>._rssDOM[optionRef].focus)) {
        <span class="hljs-keyword">this</span>._rssDOM[optionRef].focus();
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>focus the dropdown’s search field if it exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _focusSearch() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM.searchInput) {
      <span class="hljs-keyword">this</span>._rssDOM.searchInput.focus();
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>shift focus from dropdown trigger to any removal/clear buttons
for keyboard navigation and accessibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _focusRemovalButtons(event) {
    <span class="hljs-keyword">const</span> triggerContainer = <span class="hljs-keyword">this</span>._rssDOM.triggerDiv;

    <span class="hljs-keyword">const</span> buttons = triggerContainer.getElementsByTagName(<span class="hljs-string">'button'</span>);

    <span class="hljs-keyword">let</span> currentlyFocusedRemoveButtonIndex,
        nextButtonIndexToFocus;

    <span class="hljs-keyword">if</span> (buttons.length) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt; buttons.length; i++) {
        <span class="hljs-keyword">if</span> (buttons[i] === <span class="hljs-built_in">document</span>.activeElement) {
          currentlyFocusedRemoveButtonIndex = i;
          nextButtonIndexToFocus = event.shiftKey ? i<span class="hljs-number">-1</span> : i+<span class="hljs-number">1</span>;
        }
      }
    }

    <span class="hljs-keyword">if</span> (buttons[nextButtonIndexToFocus]) {
      <span class="hljs-keyword">this</span>._arrestEvent(event);
      buttons[nextButtonIndexToFocus].focus();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nextButtonIndexToFocus &amp;&amp; (nextButtonIndexToFocus &lt; <span class="hljs-number">0</span>)) {
      <span class="hljs-keyword">this</span>._focusTrigger();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(buttons[<span class="hljs-number">0</span>] &amp;&amp; !_.isNumber(currentlyFocusedRemoveButtonIndex)) {
      <span class="hljs-keyword">this</span>._arrestEvent(event);
      buttons[<span class="hljs-number">0</span>].focus();
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>focus the main trigger element of the control if the user is interacting with this control instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _focusTrigger() {
    <span class="hljs-keyword">this</span>._rssDOM.triggerDiv.focus();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>choose whether to template the display of user-selected values normally, or as tags</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _generateValueDisplay() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.props.tags) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getNormalDisplayMarkup();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getTagsDisplayMarkup();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>render the content shown if an ajax error occurs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getAjaxErrorMarkup() {
    <span class="hljs-keyword">let</span> errorString = <span class="hljs-keyword">this</span>.props.ajaxErrorString ? <span class="hljs-keyword">this</span>.props.ajaxErrorString : <span class="hljs-keyword">this</span>.ajaxErrorString;
    <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-dropdown-option error"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.errorDisplay = c }}&gt;
                {errorString}
              <span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>calculate and return the renderable data source object or array, factoring in the search filtering, and any grouping functionality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getDataSource() {
    <span class="hljs-keyword">let</span> data = _.isArray(<span class="hljs-keyword">this</span>.state.data) ? <span class="hljs-keyword">this</span>.state.data : [];
    <span class="hljs-keyword">if</span> (_.isString(<span class="hljs-keyword">this</span>.state.searchString)) {
      data = <span class="hljs-keyword">this</span>._filterDataBySearchString(data);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.groupBy) {
      data = _.groupBy(data, <span class="hljs-keyword">this</span>.props.groupBy);
    }

    <span class="hljs-keyword">return</span> data;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>build and render the dropdown content
will trigger the <strong>ajaxDataFetch</strong> fetch (and show loader) if needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getDropdownContent() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">let</span> mouseMoveHandler,
        pagingLi,
        searchContent = <span class="hljs-keyword">this</span>._getSearchContent();

    mouseMoveHandler = (<span class="hljs-keyword">this</span>.props.pageDataFetch) ? <span class="hljs-keyword">this</span>._onMouseMove : <span class="hljs-literal">null</span>;
    pagingLi = <span class="hljs-keyword">this</span>.state.isFetchingPage ? <span class="hljs-keyword">this</span>._getPagingLi() : <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.dropdownContent = c }} className="r-ss-dropdown" onKeyDown={this._handleKeyDown}&gt;
        {searchContent}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.scrollWrap = c }} className="r-ss-options-wrap" onMouseMove={mouseMoveHandler}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-dropdown-options"</span>
              <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.dropdownOptionsList = c }}
              tabIndex="-1"
              id={this._ariaGetListId()}
              role="listbox"
              aria-expanded={this.state.isOpen}
              onWheel={this._arrestScroll}&gt;
            {this._getOptionsMarkup()}
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
          {pagingLi}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>build the string used as a React component ref for each focusable option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getFocusedOptionKey() {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'option_'</span> + <span class="hljs-keyword">this</span>.state.focusedId;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>render a group heading, used if <strong>groupBy</strong> option is provided.
renders a non-focusable list item for an option group heading</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getGroupHeadingMarkup(heading) {
    <span class="hljs-keyword">if</span> (!heading) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">let</span> headingClasses = classNames(<span class="hljs-string">"r-ss-option-group-heading"</span>, <span class="hljs-keyword">this</span>.props.customGroupHeadingClass),
        headingKey = <span class="hljs-string">"heading_"</span> + heading,
        headingMarkup = <span class="hljs-keyword">this</span>.props.customGroupHeadingTemplateFunction ? <span class="hljs-keyword">this</span>.props.customGroupHeadingTemplateFunction(heading) : heading;</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>currently, group headings are aria-hidden so they will not throw off the options count in voiceover
in search of a better solution for announcing/navigating grouped listbox items as subgroups</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">tabIndex</span>=<span class="hljs-string">"-1"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{headingClasses}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{headingKey}</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"separator"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">{heading}</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">{true}</span>&gt;</span>
        {headingMarkup}
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>render the content shown when no options are available</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getNoResultsMarkup() {
    <span class="hljs-keyword">let</span> noResultsString = <span class="hljs-keyword">this</span>.props.noResultsString ? <span class="hljs-keyword">this</span>.props.noResultsString : <span class="hljs-keyword">this</span>.props.noResultsString;
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">&lt;li className=<span class="hljs-string">"r-ss-dropdown-option"</span> tabIndex=<span class="hljs-string">"-1"</span>&gt;&lt;i ref={(c</span>) =&gt;</span> {<span class="hljs-keyword">this</span>._rssDOM.noResults = c; }}&gt;{noResultsString}&lt;<span class="hljs-regexp">/i&gt;&lt;/</span>li&gt;);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Render the selected options into the trigger element using the normal (i.e. non-tags) behavior.
Choose whether to render using the default template or a provided <strong>customOptionTemplateFunction</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getNormalDisplayMarkup() {
    <span class="hljs-keyword">return</span> _.map(<span class="hljs-keyword">this</span>.state.value, (value) =&gt; {
      <span class="hljs-keyword">let</span> selectedKey = <span class="hljs-string">"r_ss_selected_"</span> + value[<span class="hljs-keyword">this</span>.state.labelKey];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.customSelectedOptionTemplateFunction) {
        <span class="hljs-keyword">if</span> (value.id != <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.customSelectedOptionTemplateFunction(value);
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.customOptionTemplateFunction) {
        <span class="hljs-keyword">if</span> (value.id != <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.customOptionTemplateFunction(value);
        }
      }
      <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{selectedKey}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-selected-label"</span>&gt;</span>{value[this.state.labelKey]}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>);
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>render a loading span (spinner gif), with <strong>customLoaderClass</strong> if provided</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getLoadingMarkup() {
    <span class="hljs-keyword">let</span> loaderClasses = <span class="hljs-keyword">this</span>.props.customLoaderClass ? <span class="hljs-string">"r-ss-loader "</span> + <span class="hljs-keyword">this</span>.props.customLoaderClass : <span class="hljs-string">"r-ss-loader"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">&lt;span ref={(c</span>) =&gt;</span> {<span class="hljs-keyword">this</span>._rssDOM.loader = c }} className={loaderClasses}&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>get the option Li element from a passed eventTarget.
for key events = event.target
for click events = event.currentTarget</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getOptionIndexFromTarget(targetLi) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(targetLi.getAttribute(<span class="hljs-string">'data-option-index'</span>), <span class="hljs-number">10</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>render the data source as options,
render loading if fetching
render ajaxError markup when state.ajaxError is true</p>
<ul>
<li>when <strong>groupBy</strong> is set, data will be a javascript object.  Run with group heading renders in that case</li>
<li>must track options count to maintain a single focusable index mapping across multiple groups of options</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getOptionsMarkup() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._needsAjaxFetch()) {
      <span class="hljs-keyword">this</span>._fetchDataViaAjax();
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getPagingLi();
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.ajaxError) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getAjaxErrorMarkup();
    }

    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">this</span>._getDataSource();

    <span class="hljs-keyword">let</span> options = [],
        optionsCount = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (!_.isArray(data)) {
      _.forIn(data, (groupedOptions, heading) =&gt; {
        options.push(<span class="hljs-keyword">this</span>._getGroupHeadingMarkup(heading));
        options = options.concat(<span class="hljs-keyword">this</span>._getTemplatedOptions(groupedOptions, optionsCount));
        optionsCount = optionsCount + groupedOptions.length;
      });
    } <span class="hljs-keyword">else</span> {
      options = <span class="hljs-keyword">this</span>._getTemplatedOptions(data);
    }

    <span class="hljs-keyword">return</span> options;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>get the data-option-value attribute for an option node
convert to numeric (data-attrs cast to strings) if:
the conversion does not alter the string representation’s value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getOptionValueFromDataAttr(optionNode) {
    <span class="hljs-keyword">let</span> optionValue = optionNode.getAttribute(<span class="hljs-string">'data-option-value'</span>);

    optionValue = (+optionValue + <span class="hljs-string">""</span> === optionValue) ? +optionValue : optionValue;
    <span class="hljs-keyword">return</span> optionValue;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>render a list item with a loading indicator.  Shown while <strong>pageDataFetch</strong> or <strong>ajaxDataFetch</strong> functions run</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getPagingLi() {
    <span class="hljs-keyword">return</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"page_loading"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-page-fetch-indicator"</span> <span class="hljs-attr">tabIndex</span>=<span class="hljs-string">"-1"</span>&gt;</span>
            {this._getLoadingMarkup()}
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>render a search input bar with a search icon</p>
<ul>
<li>add localized <strong>searchPlaceholder</strong> if provided</li>
<li>add <strong>customIconClass</strong> if provided</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getSearchContent() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.props.searchable) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">let</span> clearSearch = <span class="hljs-literal">null</span>,
        clearSearchLabelString = <span class="hljs-keyword">this</span>.props.clearSearchLabelString ? <span class="hljs-keyword">this</span>.props.clearSearchLabelString : <span class="hljs-keyword">this</span>.props.clearSearchLabelString,
        magnifierClass = <span class="hljs-keyword">this</span>.props.customSearchIconClass ? <span class="hljs-keyword">this</span>.props.customSearchIconClass : <span class="hljs-string">"r-ss-magnifier"</span>,
        searchPlaceholderString = <span class="hljs-keyword">this</span>.props.searchPlaceholder ? <span class="hljs-keyword">this</span>.props.searchPlaceholder : <span class="hljs-keyword">this</span>.props.searchPlaceholder,
        searchAriaId = <span class="hljs-keyword">this</span>.state.controlId + <span class="hljs-string">'_search'</span>,
        searchAriaIdLabel = searchAriaId + <span class="hljs-string">'_label'</span>;

    <span class="hljs-keyword">if</span> (_.isString(<span class="hljs-keyword">this</span>.state.searchString)) {
      clearSearch = <span class="hljs-function">(<span class="hljs-params">&lt;button aria-label={clearSearchLabelString} ref={(c</span>) =&gt;</span> {<span class="hljs-keyword">this</span>._rssDOM.searchClear = c }} name=<span class="hljs-string">"clearSearch"</span> type=<span class="hljs-string">"button"</span> className=<span class="hljs-string">"r-ss-search-clear"</span> onClick={<span class="hljs-keyword">this</span>._clearSearchString} onKeyDown={<span class="hljs-keyword">this</span>._clearSearchString}&gt;
                       <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> /&gt;</span>
                     <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>);
    }

    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-search-wrap"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-search-inner"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.searchInputLabel = c }} id={searchAriaIdLabel} className="r-ss-search-aria-label" htmlFor={searchAriaId}&gt;{searchPlaceholderString}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM.searchInput = c }}
                 placeholder={searchPlaceholderString}
                 onClick={this._setFocusIdToSearch}
                 onChange={this._handleSearch}
                 value={this.state.searchString}
                 name={searchAriaId}
                 id={searchAriaId}
                 aria-labelledby={searchAriaIdLabel}
                 aria-autocomplete="list" /&gt;
          {clearSearch}
          <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{magnifierClass}</span>&gt;</span>search<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    );
  }

</span></pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>iterate over selected values and build tags markup for selected options display</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getTagsDisplayMarkup() {
    <span class="hljs-keyword">return</span> _.map(<span class="hljs-keyword">this</span>.state.value, (value) =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getTagMarkup(value);
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>render a tag for an individual selected value</p>
<ul>
<li>add <strong>customTagClass</strong> if provided</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getTagMarkup(value) {
    <span class="hljs-keyword">const</span> displayValue = value[<span class="hljs-keyword">this</span>.state.valueKey],
          tagRemoveIndex = <span class="hljs-keyword">this</span>._getTagRemoveIndex(displayValue);

    <span class="hljs-keyword">let</span> label = value[<span class="hljs-keyword">this</span>.state.labelKey],
        tagKey = <span class="hljs-string">'tag_'</span> + displayValue,
        buttonName = <span class="hljs-string">"RemoveTag_"</span> + displayValue,
        tagRemoveButtonLabelString = <span class="hljs-keyword">this</span>.props.tagRemoveLabelString ? <span class="hljs-keyword">this</span>.props.tagRemoveLabelString : <span class="hljs-keyword">this</span>.props.tagRemoveLabelString,
        tagWrapClass = <span class="hljs-keyword">this</span>.props.customTagClass ? <span class="hljs-string">"r-ss-tag "</span> + <span class="hljs-keyword">this</span>.props.customTagClass : <span class="hljs-string">"r-ss-tag"</span>;

    tagRemoveButtonLabelString = tagRemoveButtonLabelString + <span class="hljs-string">" "</span> + label;

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{tagWrapClass}</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{tagKey}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"r-ss-tag-label"</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">{tagRemoveButtonLabelString}</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM[tagRemoveIndex] = c }} name={buttonName} type="button" className="r-ss-tag-remove" onClick={this._removeTagClick.bind(null, value)} onKeyDown={this._removeTagKeyPress.bind(null, value)}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>tagRemovalIndex is used to focus the first tag removal button (as a ref) when deleting tags from keyboard</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getTagRemoveIndex(identifier) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"tag_remove_"</span> + identifier;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>choose a rendering function, either <strong>customOptionTemplateFunction</strong> if provided, or default</p>
<ul>
<li>render no results markup if no options result from map calls</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _getTemplatedOptions(data, indexStart) {

    indexStart = indexStart || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> options = <span class="hljs-keyword">this</span>._mapDataToOptionsMarkup(data, indexStart);

    <span class="hljs-keyword">if</span> (options.length === <span class="hljs-number">0</span>) {
      options = <span class="hljs-keyword">this</span>._getNoResultsMarkup();
    }

    <span class="hljs-keyword">return</span> options;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>close control on document click outside of the control itself
react can remove event targets before this executes
verify event target node is still in the DOM and close if click did not originate in RSS control</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _handleDocumentClick() {
    <span class="hljs-keyword">const</span> event = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)[<span class="hljs-number">0</span>],
          isTargetStillInDOM = <span class="hljs-built_in">document</span>.body.contains(event.target);

    <span class="hljs-keyword">if</span> (isTargetStillInDOM &amp;&amp; !<span class="hljs-keyword">this</span>._rssDOM.rssControl.contains(event.target)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
        <span class="hljs-keyword">this</span>.setState({
          <span class="hljs-attr">isOpen</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">focusedId</span>: <span class="hljs-literal">undefined</span>
        });
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>main keyDown binding handler for keyboard navigation and selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _handleKeyDown(event) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isUserSearchTypingEvent(event)) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>stop propagation of keyboard events relevant to an open super select</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (_.includes(<span class="hljs-keyword">this</span>.ariaRelevantKeydownCodes, event.which)) {
        <span class="hljs-keyword">this</span>._arrestEvent(event);
      }
    }

    <span class="hljs-keyword">switch</span>(event.which) {
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.down:
        <span class="hljs-keyword">this</span>._onDownKey(event);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.end:
        <span class="hljs-keyword">this</span>._onEndKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.enter:
        <span class="hljs-keyword">this</span>._onEnterKey(event);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.esc:
        <span class="hljs-keyword">this</span>._onEscKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.home:
        <span class="hljs-keyword">this</span>._onHomeKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.space:
        <span class="hljs-keyword">this</span>._onEnterKey(event); <span class="hljs-comment">// delegate to enter</span>
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.tab: <span class="hljs-comment">// delegate to enter (selection) handler</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
          <span class="hljs-keyword">this</span>._onEnterKey(event);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>._focusRemovalButtons(event);
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.up:
        <span class="hljs-keyword">this</span>._onUpKey(event);
        <span class="hljs-keyword">break</span>;
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>handler for searchInput’s onChange event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _handleSearch(event) {
    <span class="hljs-keyword">this</span>._arrestEvent(event);
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">searchString</span>: event.target.value
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>return the boolean used to determine whether an option should have the ‘r-ss-selected’ class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _isCurrentlySelected(dataItem) {
    <span class="hljs-keyword">if</span> (!_.isArray(<span class="hljs-keyword">this</span>.state.value)) {
      <span class="hljs-keyword">return</span> _.isEqual(<span class="hljs-keyword">this</span>.state.value, dataItem);
    }
    <span class="hljs-keyword">return</span> !!(_.find(<span class="hljs-keyword">this</span>.state.value, dataItem));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>tags and mutiple both provide multi-select behavior.  Returns true if either is set to true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _isMultiSelect() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.multiple || <span class="hljs-keyword">this</span>.props.tags;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>user search events need to pass through the default keyDown handler</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _isUserSearchTypingEvent(event) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._rssDOM.searchInput || (event.which === <span class="hljs-keyword">this</span>.keymap.down) || ((event.which === <span class="hljs-keyword">this</span>.keymap.up) &amp;&amp; event.altKey) || (event.which === <span class="hljs-keyword">this</span>.keymap.esc)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> (event.target === <span class="hljs-keyword">this</span>._rssDOM.searchInput);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Render the option list-items.
Leverage the <strong>customOptionTemplateFunction</strong> function if provided</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _mapDataToOptionsMarkup(data, indexStart) {
    <span class="hljs-keyword">return</span> _.map(data, (dataOption, index) =&gt; {
      index = indexStart + index;

      <span class="hljs-keyword">const</span> indexRef = <span class="hljs-string">'option_'</span> + index;

      <span class="hljs-keyword">let</span> isCurrentlySelected = <span class="hljs-keyword">this</span>._isCurrentlySelected(dataOption),
          itemKey = <span class="hljs-string">"drop_li_"</span> + dataOption[<span class="hljs-keyword">this</span>.state.valueKey],
          ariaDescendantId = <span class="hljs-keyword">this</span>.state.controlId + <span class="hljs-string">'_aria_'</span> + indexRef,
          optionMarkup = _.isFunction(<span class="hljs-keyword">this</span>.props.customOptionTemplateFunction) ? <span class="hljs-keyword">this</span>.props.customOptionTemplateFunction(dataOption, <span class="hljs-keyword">this</span>.state.searchString) : dataOption[<span class="hljs-keyword">this</span>.state.labelKey],
          classes = classNames(<span class="hljs-string">'r-ss-dropdown-option'</span>, {
            <span class="hljs-string">'r-ss-selected'</span>: isCurrentlySelected
          });

      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{(c)</span> =&gt;</span> {this._rssDOM[indexRef] = c }}
            id={ariaDescendantId}
            tabIndex="0"
            data-option-index={index}
            className={classes}
            aria-selected={isCurrentlySelected}
            key={itemKey}
            data-option-value={dataOption[this.state.valueKey]}
            onClick={this._selectItemOnOptionClick.bind(null, dataOption)}
            role="option"&gt;
          {optionMarkup}
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>);
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>determines next focusedId prior to updateFocusedId call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _moveFocusDown() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._needsAjaxFetch()) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">let</span> nextId;

    <span class="hljs-keyword">if</span> (_.isUndefined(<span class="hljs-keyword">this</span>.state.focusedId)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.searchable) {
        nextId = <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID;
      } <span class="hljs-keyword">else</span> {
        nextId = <span class="hljs-number">0</span>;
      }
    } <span class="hljs-keyword">else</span> {
      nextId = (<span class="hljs-keyword">this</span>.state.lastOptionId === <span class="hljs-keyword">this</span>.state.focusedId) ? <span class="hljs-keyword">this</span>.state.lastOptionId : <span class="hljs-keyword">this</span>.state.focusedId + <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">this</span>._updateFocusedId(nextId);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>determines previous focusedId prior to updateFocusedId call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _moveFocusUp() {
    <span class="hljs-keyword">let</span> previousId;

    <span class="hljs-keyword">if</span> (!_.isUndefined(<span class="hljs-keyword">this</span>.state.focusedId) &amp;&amp; (<span class="hljs-keyword">this</span>.state.focusedId !== <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.focusedId === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.searchable) {
          previousId = <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID;
        }
      } <span class="hljs-keyword">else</span> {
        previousId = <span class="hljs-keyword">this</span>.state.focusedId - <span class="hljs-number">1</span>;
      }
    }
    <span class="hljs-keyword">this</span>._updateFocusedId(previousId);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>return boolean to determine if we have already received data from the <strong>ajaxDataFetch</strong> function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _needsAjaxFetch() {
    <span class="hljs-keyword">return</span> (_.isUndefined(<span class="hljs-keyword">this</span>.state.rawDataSource) &amp;&amp; _.isFunction(<span class="hljs-keyword">this</span>.props.ajaxDataFetch));
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>down key handler
shift-keypress is used to select successive focus items for aria keyboard accessibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onDownKey(event) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>.toggleDropdown();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._moveFocusDown();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; event.shiftKey) {
      <span class="hljs-keyword">this</span>._selectFocusedOption(event.target, <span class="hljs-literal">true</span>);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>end key handler. Move focus to the last available option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onEndKey() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.lastOptionId) {
      <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-keyword">this</span>.state.lastOptionId);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Enter key handler.
Opens the control when closed.
Otherwise, makes selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onEnterKey(event) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>.toggleDropdown();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; event.shiftKey) {
      <span class="hljs-keyword">this</span>._selectAllOptionsToLastUserSelectedOption(event.target);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> keepControlOpen = (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; (event.ctrlKey || event.metaKey));

    <span class="hljs-keyword">this</span>._selectFocusedOption(event.target, keepControlOpen);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Escape key handler. Closes the dropdown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onEscKey() {
    <span class="hljs-keyword">this</span>._closeOnKeypress();
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Home key handler. Moves focus to the first available option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onHomeKey() {
    <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-number">0</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>mouse move handler used when <strong>pageDataFetch</strong> is set. It will fire the pageDataFetch function if the user has scrolled sufficiently far in the dropdown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onMouseMove() {</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>do not fetch page if searching or already loading data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM.loader || <span class="hljs-keyword">this</span>.state.searchString || !<span class="hljs-keyword">this</span>._pageFetchingComplete()) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> wrap = <span class="hljs-keyword">this</span>._rssDOM.scrollWrap;

    <span class="hljs-keyword">if</span> ((wrap.scrollTop + wrap.offsetHeight) &gt;= wrap.scrollHeight) {
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">isFetchingPage</span>: <span class="hljs-literal">true</span>
      }, <span class="hljs-keyword">this</span>._fetchNextPage);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Up key handler.
Shift-click is used to select successive focus items for aria keyboard accessibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _onUpKey(event) {
    <span class="hljs-keyword">if</span> (event.altKey) {
      <span class="hljs-keyword">this</span>._closeOnKeypress();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>._moveFocusUp();
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; event.shiftKey) {
        <span class="hljs-keyword">this</span>._selectFocusedOption(event.target, <span class="hljs-literal">true</span>);
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>If hasMorePages option (Function) present, returns the value of its call.
Otherwise, returns false so page fetch will not occur</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _pageFetchingComplete() {
    <span class="hljs-keyword">if</span> (!_.isFunction(<span class="hljs-keyword">this</span>.props.hasMorePages)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.hasMorePages(<span class="hljs-keyword">this</span>.state.rawDataSource);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Used in shift selection when the event target was previously selected.
Remove all options up to, but not including the option that raised the event.
(So it behaves like a native browser form multi-select)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeAllOptionsInOptionIdRange(<span class="hljs-keyword">from</span>, to) {
    <span class="hljs-keyword">const</span> valuePropsToReject = [],
          start = (<span class="hljs-keyword">from</span> &lt;= to) ? <span class="hljs-keyword">from</span> : to,
          end = (to &gt;= <span class="hljs-keyword">from</span>) ? to : <span class="hljs-keyword">from</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt;= end; i++) {
      <span class="hljs-keyword">const</span> refString = <span class="hljs-string">'option_'</span> + i,
            option = <span class="hljs-keyword">this</span>._rssDOM[refString];
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX.test(option.getAttribute(<span class="hljs-string">"class"</span>))) {</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>do not remove the item the user shift-clicked, this is the way browser default shift-click behaves in multi-select</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lastUserSelectedOption.getAttribute(<span class="hljs-string">'data-option-value'</span>) !== option.getAttribute(<span class="hljs-string">'data-option-value'</span>)) {
          valuePropsToReject.push(<span class="hljs-keyword">this</span>._getOptionValueFromDataAttr(option));
        }
      }
    }

    <span class="hljs-keyword">const</span> remainingSelected = _.reject(<span class="hljs-keyword">this</span>.state.value, (opt) =&gt; {
        <span class="hljs-keyword">return</span> _.includes(valuePropsToReject, opt[<span class="hljs-keyword">this</span>.state.valueKey]);
      });

    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">value</span>: remainingSelected
    }, <span class="hljs-keyword">this</span>._broadcastChange);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Remove an item from the state.value selected items array.
The <em>value</em> arg represents a full dataSource option object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeSelectedOptionByValue(value, callback = _.noop) {</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>clear lastUserSelected if has been removed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lastUserSelectedOption &amp;&amp; (<span class="hljs-keyword">this</span>.lastUserSelectedOption.getAttribute(<span class="hljs-string">'data-option-value'</span>) === value[<span class="hljs-keyword">this</span>.state.valueKey])) {
      <span class="hljs-keyword">this</span>.lastUserSelectedOption = <span class="hljs-literal">undefined</span>;
    }

    <span class="hljs-keyword">const</span> SelectedAfterRemoval = _.reject(<span class="hljs-keyword">this</span>.state.value, (option) =&gt; {
                                 <span class="hljs-keyword">return</span> option[<span class="hljs-keyword">this</span>.state.valueKey] === value[<span class="hljs-keyword">this</span>.state.valueKey];
                               });

    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">value</span>: SelectedAfterRemoval
    }, () =&gt; {
      callback();
      <span class="hljs-keyword">this</span>._broadcastChange();
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>remove a selected tag on keyDown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeTagKeyPress(value, event) {
    <span class="hljs-keyword">const</span> isEnterKey = event.which === <span class="hljs-keyword">this</span>.keymap.enter,
          isSpaceKey = event.which === <span class="hljs-keyword">this</span>.keymap.space;

    <span class="hljs-keyword">if</span> (isEnterKey || isSpaceKey) {
      <span class="hljs-keyword">this</span>._arrestEvent(event);
      <span class="hljs-keyword">this</span>._removeSelectedOptionByValue(value, <span class="hljs-keyword">this</span>._setFocusToTagRemovalIfPresent); <span class="hljs-comment">// delegate to removal handler</span>
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>remove a selected tag on click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _removeTagClick(value, event) {
    <span class="hljs-keyword">this</span>._arrestEvent(event);

    <span class="hljs-keyword">this</span>._removeSelectedOptionByValue(value);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>used in shift-click range selections</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _selectAllOptionsInOptionIdRange(<span class="hljs-keyword">from</span>, to) {
    <span class="hljs-keyword">const</span> valuePropsToSelect = [],
          start = (<span class="hljs-keyword">from</span> &lt;= to) ? <span class="hljs-keyword">from</span> : to,
          end = (to &gt;= <span class="hljs-keyword">from</span>) ? to : <span class="hljs-keyword">from</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt;= end; i++) {
      <span class="hljs-keyword">const</span> refString = <span class="hljs-string">'option_'</span> + i,
            option = <span class="hljs-keyword">this</span>._rssDOM[refString];
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX.test(option.getAttribute(<span class="hljs-string">"class"</span>))) {
        valuePropsToSelect.push(<span class="hljs-keyword">this</span>._getOptionValueFromDataAttr(option));
      }
    }

    <span class="hljs-keyword">const</span> optionsToSelect = _.reduce(<span class="hljs-keyword">this</span>.state.data, (memo, opt) =&gt; {
          <span class="hljs-keyword">if</span> (_.includes(valuePropsToSelect, opt[<span class="hljs-keyword">this</span>.state.valueKey])) {
            memo.push(opt);
          }
          <span class="hljs-keyword">return</span> memo;
        }, []);
    <span class="hljs-keyword">this</span>._selectItemByValues(optionsToSelect, <span class="hljs-literal">true</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Used in shift-key selection.
Select all options from the current eventTarget to the lastUserSelectedOption</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _selectAllOptionsToLastUserSelectedOption(eventTargetLi) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.lastUserSelectedOption) {
      <span class="hljs-keyword">this</span>.lastUserSelectedOption = eventTargetLi;</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>select all options from the first option to the clicked option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>._selectAllOptionsInOptionIdRange(<span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>._getOptionIndexFromTarget(eventTargetLi));
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> fromVal = <span class="hljs-keyword">this</span>._getOptionIndexFromTarget(<span class="hljs-keyword">this</span>.lastUserSelectedOption),
          to = <span class="hljs-keyword">this</span>._getOptionIndexFromTarget(eventTargetLi);

    <span class="hljs-keyword">this</span>.lastUserSelectedOption = eventTargetLi;</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>if the option was already selected, this should trigger a removal operation, otherwise trigger an add</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX.test(eventTargetLi.getAttribute(<span class="hljs-string">'class'</span>))) {
      <span class="hljs-keyword">this</span>._removeAllOptionsInOptionIdRange(fromVal, to);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._selectAllOptionsInOptionIdRange(fromVal, to);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>Make a user-selection of the option that is currently focused.
Will close the dropDown when keepControlOpen is falsy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _selectFocusedOption(eventTargetLi, keepControlOpen) {
    <span class="hljs-keyword">const</span> focusedOptionKey = <span class="hljs-keyword">this</span>._getFocusedOptionKey();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._rssDOM[focusedOptionKey]) {
      <span class="hljs-keyword">const</span> optionValue = <span class="hljs-keyword">this</span>._getOptionValueFromDataAttr(<span class="hljs-keyword">this</span>._rssDOM[focusedOptionKey]);</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>store as last userSelected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.lastUserSelectedOption = eventTargetLi;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX.test(<span class="hljs-keyword">this</span>._rssDOM[focusedOptionKey].className)) {
        <span class="hljs-keyword">const</span> optionFullFromValueProp = _.head(<span class="hljs-keyword">this</span>._findArrayOfOptionDataObjectsByValue(optionValue));
        <span class="hljs-keyword">this</span>._removeSelectedOptionByValue(optionFullFromValueProp);
      } <span class="hljs-keyword">else</span> {
        keepControlOpen = keepControlOpen || <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>._selectItemByValues(optionValue, keepControlOpen);
      }
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Handle selection of an option or array of options.
Track last selection the user made.
Close dropdown on the setState callback if not a non control-closing selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _selectItemByValues(value, keepControlOpen) {
   <span class="hljs-keyword">let</span> objectValues = <span class="hljs-keyword">this</span>._findArrayOfOptionDataObjectsByValue(value);
   <span class="hljs-keyword">var</span> uniSelect;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() || keepControlOpen &amp;&amp; <span class="hljs-keyword">this</span>.state.value) {
      objectValues = <span class="hljs-keyword">this</span>.state.value.concat(objectValues);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
        uniSelect = [_.head(objectValues)];
      } <span class="hljs-keyword">else</span> {
        uniSelect = [];
      }
    }

    <span class="hljs-keyword">const</span> newState = {
      <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>._isMultiSelect() ? objectValues : uniSelect
    };

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.searchable &amp;&amp; <span class="hljs-keyword">this</span>.props.clearSearchOnSelection) {
      _.extend(newState, {
        <span class="hljs-attr">searchString</span>: <span class="hljs-literal">undefined</span>
      });
    }

    <span class="hljs-keyword">this</span>.setState(newState, () =&gt; {
      <span class="hljs-keyword">if</span> (!keepControlOpen) {
        <span class="hljs-keyword">this</span>._closeOnKeypress();
      }
      <span class="hljs-keyword">this</span>._broadcastChange();
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>handle option-click (ctrl or meta keys) when selecting additional options in a multi-select control</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _selectItemOnOptionClick(value, event) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; event.shiftKey) {
      <span class="hljs-keyword">this</span>._selectAllOptionsToLastUserSelectedOption(event.currentTarget);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">const</span> keepControlOpen = (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; (event.ctrlKey || event.metaKey)),
          alreadySelected = <span class="hljs-keyword">this</span>.SELECTED_OPTION_REGEX.test(event.currentTarget.getAttribute(<span class="hljs-string">'class'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>store clicked option as the lastUserSelected unless default selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (value.id != <span class="hljs-literal">null</span>)  {
      <span class="hljs-keyword">this</span>.lastUserSelectedOption = event.currentTarget;
    }

    <span class="hljs-keyword">if</span> (alreadySelected) {
      <span class="hljs-keyword">this</span>._removeSelectedOptionByValue(value);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._selectItemByValues(value[<span class="hljs-keyword">this</span>.state.valueKey], keepControlOpen);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>set the focusId to the SEARCH_FOCUS_ID constant value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _setFocusIdToSearch() {
    <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>if lastUserSelectedOption is populated, focus it, otherwise moveFocusDown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _setFocusOnOpen() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lastUserSelectedOption) {
      <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.lastUserSelectedOption.getAttribute(<span class="hljs-string">'data-option-index'</span>), <span class="hljs-number">10</span>));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>._moveFocusDown();
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>DOM focus for tag removal buttons will get lost after a tag removal.
After tag deletion via keyboard, this Keeps focus in context of tag removal as long as there are more to remove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _setFocusToTagRemovalIfPresent() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.props.tags || (<span class="hljs-keyword">this</span>.state.value.length === <span class="hljs-number">0</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">const</span> firstValue = _.head(<span class="hljs-keyword">this</span>.state.value)[<span class="hljs-keyword">this</span>.state.valueKey],
          firstTag = <span class="hljs-keyword">this</span>._rssDOM[<span class="hljs-keyword">this</span>._getTagRemoveIndex(firstValue)];

    <span class="hljs-keyword">if</span> (firstTag) {
      <span class="hljs-keyword">if</span> (_.isFunction(firstTag.focus)) {
        firstTag.focus();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Sets the current focusedId.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _updateFocusedId(id) {
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">focusedId</span>: id
    });
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <h2 id="default-property-values">Default Property Values</h2>

            </div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>ReactSuperSelect.defaultProps = {
  <span class="hljs-attr">clearable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">multiple</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">openOnMount</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">focusOnMount</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">forceDefaultBrowserScrolling</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">searchable</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">tags</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">clearSearchOnSelection</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">onCloseDropdown</span>: _.noop,
  <span class="hljs-attr">onOpenDropdown</span>: _.noop,
  <span class="hljs-attr">optionLabelKey</span>: <span class="hljs-string">'name'</span>,
  <span class="hljs-attr">optionValueKey</span>: <span class="hljs-string">'id'</span>, <span class="hljs-comment">// value this maps to should be unique in data source</span>
  ajaxErrorString: <span class="hljs-string">'An Error occured while fetching options'</span>,
  <span class="hljs-attr">clearSelectionLabelString</span>: <span class="hljs-string">'Clear Selection'</span>,
  <span class="hljs-attr">clearSearchLabelString</span>: <span class="hljs-string">'Clear Search Field'</span>,
  <span class="hljs-attr">noResultsString</span>: <span class="hljs-string">'No Results Available'</span>,
  <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'Select an Option'</span>,
  <span class="hljs-attr">searchPlaceholder</span>: <span class="hljs-string">'Search'</span>,
  <span class="hljs-attr">tagRemoveLabelString</span>: <span class="hljs-string">'Remove Tag'</span>
};</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <h2 id="properties">Properties</h2>

            </div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>ReactSuperSelect.propTypes = {</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <h2 id="boolean-options">BOOLEAN OPTIONS</h2>

            </div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p><strong>clearable</strong> <em>optional</em> - (default - true) whether or not to show a button to clear selected options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  clearable: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p><strong>disabled</strong> <em>optional</em> - (default - false) whether the control is disabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  disabled: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p><strong>multiple</strong> (Boolean) <em>optional</em>  - Whether or not the control supports multi-selection. When using the <strong>tags</strong> display option, this option is redundant</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  multiple: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p><strong>openOnMount</strong> (Boolean) <em>optional</em> - Whether or not to render the control open when it initially mounts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  openOnMount: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p><strong>focusOnMount</strong> (Boolean) <em>optional</em> (Used in conjunction with the <strong>openOnMount</strong> option) Whether or not to focus control after opening in componentDidMount lifecycle function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  focusOnMount: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p><strong>forceDefaultBrowserScrolling</strong> <em>optional</em> - (default - false) - Whether to override the default behavior of arresting mouse wheel events in an open select dropdown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  forceDefaultBrowserScrolling: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p><strong>searchable</strong> (Boolean) <em>optional</em> - Whether or not to show a search bar in the dropdown area which offers text-based filtering of the <strong>dataSource</strong> options (by label key)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  searchable: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p><strong>tags</strong> (Boolean) <em>optional</em> - Whether or not to display your chosen multi-select values as tags.  (When set, there is no need to set the <strong>multiple</strong> option)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  tags: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p><strong>clearSearchOnSelection</strong> (Boolean) <em>optional</em> (Used in conjunction with the <strong>searchable</strong> option) whether to auto-clear search field when a selection is made</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  clearSearchOnSelection: React.PropTypes.bool,</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <h2 id="css-class-custom-styling-support-options">CSS CLASS / CUSTOM STYLING SUPPORT OPTIONS</h2>

            </div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p><strong>customClass</strong> (String) <em>optional</em> - This value will be added as a css class to the control’s main wrapping element.  You should be able to overide all styling by leading your rules with</p>
<pre><code class="lang-css">.r-ss-wrap.{customClass}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customClass: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p><strong>customGroupHeadingClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>groupBy</strong> option.  The string value will be added as a custom css class to the group headings which are rendered into the dropdown</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customGroupHeadingClass: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p><strong>customSearchIconClass</strong> (String) <em>optional</em> - This value will be added as a css class to the icon element in the search-filtering bar (when <strong>searchable</strong> is true).  Allowing you to override the default search icon (default: a magnifying glass)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customSearchIconClass: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p><strong>customLoaderClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>ajaxDataFetch</strong> option.  This string value will be added as a css class to the loading icon (default: an animated gif spinner as base64 background image in css) allowing css overrides.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customLoaderClass: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p><strong>customTagClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>tags</strong> option.  This value will be added as a css class to the wrapper of a selection displayed as a tag. You should be able to overide all tag styling by leading your css rules with</p>
<pre><code class="lang-css"> .r-ss-tag.{customTagClass}
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customTagClass: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <h2 id="main-change-handler">MAIN CHANGE HANDLER</h2>

            </div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p><strong>onChange</strong> (Function) <em>required</em> - This is the main callback handler for the control.  When a user makes selection(s), this handler will be called, the selected option (or when <strong>multiple</strong> or <strong>tags</strong> an array of selected values) will be passed to the handler as an argument.  (The values passed are option objects from the dataSource collection)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onChange: React.PropTypes.func.isRequired,</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>ON OPEN / ON CLOSE HANDLERS
<strong>onCloseDropdown</strong> (Function) - a callback which will be called when the control closes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onCloseDropdown: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p><strong>onOpenDropdown</strong> (Function) - a callback which will be called when the control opens</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onOpenDropdown: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <h2 id="option-data-related-props">OPTION DATA-RELATED PROPS</h2>

            </div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p><strong>ajaxDataFetch</strong> (Function) (<em>optional - but <strong>dataSource</strong> must be supplied if undefined</em>) - Your select dropdown’s data may be fetched via ajax if you provide a function as the value for this option.
The function takes no arguments, but it must return a <strong>promise</strong> object. (i.e. an object with a then function).  The promise must resolve with a value meeting the description of the <strong>dataSource</strong> option documentation. The <strong>dataSource</strong> option should be left undefined when using this option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  ajaxDataFetch: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p><strong>dataSource</strong> (Array|Object|Collection Object) (<em>optional - but <strong>ajaxDataFetch</strong> must be supplied if undefined</em>) - The dataSource option provides the data for your options dropdown.
The value provided will go to an internal parser (_configureDataSource), which will return a collection (array of option objects) found based on argument type</p>

            </div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p> The parsing method supports dataSource values as:</p>
<ul>
<li>an array of option objects (will be directly assigned to state.data)</li>
<li>an object with a collection property (object.collection will be assigned to state.data)</li>
<li>an object with a get function (the return value of object.get(‘collection’) will be assigned to state.data)</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p> Each option in the resulting collection must have the following properties:</p>
<ul>
<li>a unique value corresponding to the key set by the <strong>optionValueKey</strong> or the default optionValueKey of <strong>id</strong></li>
<li>a defined value corresponding to the key set by the <strong>optionLabelKey</strong> or the default optionLabelKey of <strong>name</strong></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>  dataSource: React.PropTypes.oneOfType([
            React.PropTypes.arrayOf(React.PropTypes.object),
            React.PropTypes.object
          ]),</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p><strong>initialValue</strong> (Array|Object) <em>optional</em>
The selected value the control will be initialized with
must be an array of option items or a single option item from your dataSource collection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialValue: React.PropTypes.oneOfType([
            React.PropTypes.arrayOf(React.PropTypes.object),
            React.PropTypes.object
          ]),</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p><strong>optionLabelKey</strong> (String) (<em>optional - defaults to using ‘name’ as the key if undefined</em>) - This value represents the key in each option object (from the <strong>dataSource</strong> collection), which represents the value you would like displayed for each option.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  optionLabelKey: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p><strong>optionValueKey</strong> (String) (<em>optional - defaults to using ‘id’ as the key if undefined</em>) - This value represents the key in each option object (from the <strong>dataSource</strong> collection), which represents the value that <strong>uniquely identifies</strong> that option across the <strong>dataSource</strong> collection.  Think of it in terms of the value attribute of a traditional html <code>&lt;select&gt;</code> element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  optionValueKey: React.PropTypes.string, <span class="hljs-comment">// value this maps to should be unique in data source</span></pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p><strong>pageDataFetch</strong> (Function) <em>optional</em> (A <em>hasMorePages</em> function should be provided when using this option) - Additional pages of data can be fetched  via ajax if you provide a function as the value for this option.
The function takes one argument, the value provided as the <strong>dataSource</strong> (or the return value of the <strong>ajaxDataSource</strong> function).
It must return a <strong>promise</strong> object. (i.e. an object with a then function). The promise must resolve with a value meeting the description of the <strong>dataSource</strong> option documentation.
The pageDataFetch function will be called based upon the user’s scroll position in the dropdown.
<em>It will not be called when loading ajax data, or when filtering results in a searchable dropdown, or when <em>*hasMorePages</em></em> evaluates to false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  pageDataFetch: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p><strong>hasMorePages</strong> (Function) <em>optional</em> (should be provided when using the <em>pageDataFetch</em> option) - A function that accepts one argument, a value as described by the <em>dataSource</em> option documentation, and returns a Boolean value.
The value should indicate whether the option data collection has any more pages available for fetching</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  hasMorePages: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <h2 id="grouping-functionality">GROUPING FUNCTIONALITY</h2>

            </div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p><strong>groupBy</strong> (String|Object|Function) <em>optional</em> - Allows you to sort your dropdown options into groups by leveraging Lodash’s groupBy function.  Please reference the <a href="https://lodash.com/docs#groupBy">Lodash</a> documentation for behavior of <em>groupBy</em> when passed different argument types</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  groupBy: React.PropTypes.oneOfType([
            React.PropTypes.string,
            React.PropTypes.func,
            React.PropTypes.object
          ]),</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p><strong>customGroupHeadingTemplateFunction</strong> (Function) <em>optional</em> (Used in conjunction with the <strong>groupBy</strong> option) - This function provides custom templating capability for your dropdown heading options.  The function should accept the value returned as each group’s object key (returned by the call of Lodash’s groupBy when passed the value of your <strong>groupBy</strong> option)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customGroupHeadingTemplateFunction: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <h2 id="rendering-option-iterator-functions">RENDERING (OPTION ITERATOR) FUNCTIONS</h2>

            </div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p><strong>customFilterFunction</strong> (Function) <em>optional</em> - Used in conjunction with the <strong>searchable</strong> option.  The function provided will serve as a replacement of the default search filter function.
and will be called as the predicate function of <a href="https://lodash.com/docs#filter">Lodash’s filter function</a></p>

            </div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>The function will be called with four arguments, The first three are the usual lodash predicate arguments (value, index|key, collection). The last is the current <strong>searchString</strong> (state variable)</p>

            </div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>When left undefined the default filter function will be used.
(Defaults To: A lowercase string comparison for text.  Matches the <strong>optionLabelKey</strong> value to the text entered into the dropdown’s search field).  The function is leveraged by <a href="https://lodash.com/docs#filter">Lodash’s filter function</a> with your <strong>dataSource</strong> collection as its first argument.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customFilterFunction: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p><strong>customOptionTemplateFunction</strong> (Function) <em>optional</em> - This function provides custom templating capability for your dropdown options and the display of selected values.  The function should accept a single option object from your <strong>dataSource</strong> collection and return your desired markup based on that object’s properties.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  customOptionTemplateFunction: React.PropTypes.func,</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <h2 id="localization-strings">LOCALIZATION STRINGS</h2>

            </div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p><strong>ajaxErrorString</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>ajaxDataFetch</strong> &amp; <strong>pageDataFetch</strong> options) This string will be shown in the dropdown area when an ajax request fails</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  ajaxErrorString: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p><strong>clearSearchLabelString</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>clearable</strong> option) This string will be used as an aria-label for the clear selection button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  clearSelectionLabelString: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p><strong>clearSelectionsLabelString</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>searchable</strong> option) This string will be used as an aria-label for the clear search button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  clearSearchLabelString: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p><strong>noResultsString</strong> (String) <em>optional</em> - A string value which will be displayed when your dropdown shows no results.  (i.e. dataSource is an empty collection, or ajaxDataFetch returns an empty collection)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  noResultsString: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p><strong>placeholder</strong> (String) <em>optional</em> - This string value will be displayed in the main display area of your control when the user has no selected values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  placeholder: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p><strong>searchPlaceholder</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>searchable</strong> option) This string will be shown in the dropdown area’s search input field when a user has not entered any characters.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  searchPlaceholder: React.PropTypes.string,</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p><strong>tagRemoveLabelString</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>tags</strong> option) This string will be used as an aria-label for the remove-tag button on each tag (for accesibility).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  tagRemoveLabelString: React.PropTypes.string
};

<span class="hljs-built_in">module</span>.exports = ReactSuperSelect;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
